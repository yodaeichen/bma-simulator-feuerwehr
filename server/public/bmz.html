<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>BMZ – Brandmeldezentrale</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { background:#111; color:#fff; font-family:Arial; }
  .bmz { width:300px; margin:30px auto; border:5px solid red; padding:15px; }
  .led { width:20px; height:20px; border-radius:50%; margin:5px; opacity:.2; }
  .on { opacity:1; box-shadow:0 0 10px }
  .red { background:red }
  .yellow { background:yellow }
  .green { background:lime }
</style>
</head>
<body>

<div class="bmz">
  <h2>BMZ</h2>
  <div>
    <div id="led-alarm" class="led red"></div> Alarm
    <div id="led-fault" class="led yellow"></div> Störung
    <div id="led-ok" class="led green"></div> Betrieb
  </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const alarm = document.getElementById("led-alarm");
const fault = document.getElementById("led-fault");
const ok = document.getElementById("led-ok");

function clear() {
  [alarm,fault,ok].forEach(l=>l.classList.remove("on"));
}

socket.on("update", data => {
  clear();
  if (data.status === "ALARM") alarm.classList.add("on");
  if (data.status === "STOERUNG") fault.classList.add("on");
  if (data.status === "NORMAL") ok.classList.add("on");
});
</script>

</body>
</html>
